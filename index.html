<!DOCTYPE html>
<html>
  <head>
    <title>ProQuest - EEB</title>

    <!-- Load leaflet JS and CSS -->
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />

    <!-- Load JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

    <!-- Load Bootstrap JS and CSS -->
    <script src="/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Load D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.12/d3.min.js"></script>

    <!-- Load EEB Map JS and CSS -->
    <script src="js/eeb-map.js"></script>
    <link rel="stylesheet" href="/css/eeb-map.css">
  </head>

  <body onload="initialize()">
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">Early European Books Browser</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <div class="container">
      <div class="row">
        <div id="barchart" class="col-sm-2">
          <p id="menu">
            <b>Dropdown Label</b><br>
            Preface: 
            <select>

              <option value="volvo">Volvo</option>
              <option value="saab">Saab</option>
              <option value="mercedes">Mercedes</option>
              <option value="audi">Audi</option>

            </select>
          </p>
        </div> <!-- /barchart -->
        <div id="map" class="col-sm-10"></div>
      </div> <!-- /row --> 
    </div> <!-- /container -->
  </body>


<script>

// globals

var barHeight = 20;

var margin = {top: 20, right: 20, bottom: 0, left: 160},
  width = $(window).width() * .2 - margin.left - margin.right,
  height = $(window).height() - margin.top - margin.bottom;

var x = d3.scale.linear()
  .domain([0,1])
  .range([0, width]);

var y = d3.scale.linear()
  .domain([0,1])  
  .range([0, height]);

var xAxis = d3.svg.axis()
  .scale(x)
  .orient("top")
  .tickSize(-height - margin.bottom);


var initializeBarchart = function() {

  var svg = d3.select("#barchart").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)

  svg.append("g")
    .attr("class", "x axis");

  svg.append("g")
    .attr("class", "y axis")

  var menu = d3.select("#menu select")
    .on("change", updateBarchart);

};

var updateBarchart = function() {
  // create random dataset
  dataset = [];
  for (i=0; i<10; i++) {
    dataset.push( Math.random() );
  }

  // update each bar of the bar chart
  var svg = d3.select("#barchart").select("svg")
  var barchart = svg.selectAll("rect").data(dataset);

  barchart.transition()
    .duration(1000)
      .attr("width", function(d) {return x(d)})
      .attr("height", function(d, i) { return barHeight-1});
      

      var bar = barchart.enter().append("g")

        bar.append("rect")
          .attr("x", margin.left)
          .attr("y", function(d, i) {return i * barHeight;})
        .transition()
          .duration(1000)
          .attr("width", function(d) {return x(d)})
          .attr("height", function(d, i) { return barHeight-1 });
    
       bar.append("text")
          .attr("x", 5)
          .attr("y", function(d, i) {return i * barHeight + 18;})
          .text(function(d) {return d;})
          .style("width", "14px"); 

      barchart.exit()
        .transition(1000)
        .remove();

};

initializeBarchart();
updateBarchart();



  </script>
</html>






